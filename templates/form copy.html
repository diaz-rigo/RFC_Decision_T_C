{% comment %} <!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario de Datos de Salud</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .tabs {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }
      .tab {
        padding: 10px 15px;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        cursor: pointer;
        margin-right: 5px;
        flex: 1 1 auto;
        text-align: center;
      }
      .tab.active {
        background-color: #ccc;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
      form {
        width: 100%;
        max-width: 600px;
        margin: auto;
      }
      label {
        margin-top: 10px;
        display: block;
      }
      input[type="text"],
      input[type="number"] {
        padding: 10px;
        margin-bottom: 10px;
        width: calc(100% - 22px);
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
      }
      .buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
      }
      .button {
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
        border-radius: 4px;
        flex: 1 1 auto;
        text-align: center;
        margin-right: 10px;
        margin-left: 10px;
        box-sizing: border-box;
      }
      .button:hover {
        background-color: #45a049;
      }
      .button[disabled] {
        background-color: #ccc;
        cursor: not-allowed;
      }
      input[type="submit"] {
        padding: 15px;
        background-color: #4caf50;
        color: white;
        border: none;
        cursor: pointer;
        width: 100%;
        border-radius: 4px;
      }
      input[type="submit"]:hover {
        background-color: #45a049;
      }
      #resultado {
        margin-top: 20px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>Formulario de Datos de Salud</h1>
    <div class="tabs">
      <div class="tab active" onclick="openTab(event, 'tab1')">
        Datos Generales
      </div>
      <div class="tab" onclick="openTab(event, 'tab2')">Visión y Audición</div>
      <div class="tab" onclick="openTab(event, 'tab3')">
        Presión y Colesterol
      </div>
      <div class="tab" onclick="openTab(event, 'tab4')">Otros Datos</div>
    </div>

    <form id="formulario" onsubmit="enviarDatos(event)">
      <div id="tab1" class="tab-content active">
        <label for="age">Edad:</label>
        <input type="number" id="age" name="age" required />

        <label for="height">Altura (cm):</label>
        <input type="number" id="height" name="height" required />

        <label for="weight">Peso (kg):</label>
        <input type="number" id="weight" name="weight" required />

        <label for="waistline">Perímetro de Cintura (cm):</label>
        <input type="number" id="waistline" name="waistline" required />

        <div class="buttons">
          <div class="button" onclick="nextTab(1)">Siguiente</div>
        </div>
      </div>

      <div id="tab2" class="tab-content">
        <label for="sight_left">Visión Izquierda:</label>
        <input
          type="number"
          step="0.1"
          id="sight_left"
          name="sight_left"
          required
        />

        <label for="sight_right">Visión Derecha:</label>
        <input
          type="number"
          step="0.1"
          id="sight_right"
          name="sight_right"
          required
        />

        <label for="hear_left">Audición Izquierda:</label>
        <input
          type="number"
          step="0.1"
          id="hear_left"
          name="hear_left"
          required
        />

        <label for="hear_right">Audición Derecha:</label>
        <input
          type="number"
          step="0.1"
          id="hear_right"
          name="hear_right"
          required
        />

        <div class="buttons">
          <div class="button" onclick="previousTab(1)">Anterior</div>
          <div class="button" onclick="nextTab(1)">Siguiente</div>
        </div>
      </div>

      <div id="tab3" class="tab-content">
        <label for="SBP">Presión Sistólica:</label>
        <input type="number" id="SBP" name="SBP" required />

        <label for="DBP">Presión Diastólica:</label>
        <input type="number" id="DBP" name="DBP" required />

        <label for="BLDS">Azúcar en Sangre:</label>
        <input type="number" id="BLDS" name="BLDS" required />

        <label for="tot_chole"> Colesterol Total:</label>
        <input type="number" id="tot_chole" name="tot_chole" required />

        <label for="HDL_chole">Colesterol HDL:</label>
        <input type="number" id="HDL_chole" name="HDL_chole" required />

        <label for="LDL_chole">Colesterol LDL:</label>
        <input type="number" id="LDL_chole" name="LDL_chole" required />

        <label for="triglyceride">Triglicéridos:</label>
        <input type="number" id="triglyceride" name="triglyceride" required />

        <div class="buttons">
          <div class="button" onclick="previousTab(1)">Anterior</div>
          <div class="button" onclick="nextTab(1)">Siguiente</div>
        </div>
      </div>

      <div id="tab4" class="tab-content">
        <label for="hemoglobin">Hemoglobina:</label>
        <input type="number" id="hemoglobin" name="hemoglobin" required />

        <label for="urine_protein">Proteína en Orina:</label>
        <input type="number" id="urine_protein" name="urine_protein" required />

        <label for="serum_creatinine">Creatinina en Suero:</label>
        <input
          type="number"
          step="0.1"
          id="serum_creatinine"
          name="serum_creatinine"
          required
        />

        <label for="SGOT_AST">SGOT (AST):</label>
        <input type="number" id="SGOT_AST" name="SGOT_AST" required />

        <label for="SGOT_ALT">SGOT (ALT):</label>
        <input type="number" id="SGOT_ALT" name="SGOT_ALT" required />

        <label for="gamma_GTP">Gamma-GTP:</label>
        <input type="number" id="gamma_GTP" name="gamma_GTP" required />

        <label for="SMK_stat_type_cd">Código de Estado de Fumador:</label>
        <input
          type="number"
          id="SMK_stat_type_cd"
          name="SMK_stat_type_cd"
          required
        />

        <label for="sex_Female">Sexo (Femenino):</label>
        <input
          type="number"
          id="sex_Female"
          name="sex_Female"
          min="0"
          max="1"
          required
        />

        <label for="sex_Male">Sexo (Masculino):</label>
        <input
          type="number"
          id="sex_Male"
          name="sex_Male"
          min="0"
          max="1"
          required
        />

        <div class="buttons">
          <div class="button" onclick="previousTab(1)">Anterior</div>
        </div>
      </div>

      <input type="submit" value="Enviar" />
    </form>
    <p id="resultado"></p>

    <script>
      function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tab");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
      }

      function nextTab(next) {
        var currentTab = document.querySelector(".tab-content.active");
        var nextTab = document.getElementById(
          "tab" + (parseInt(currentTab.id.substr(3)) + next)
        );
        currentTab.classList.remove("active");
        nextTab.classList.add("active");
      }

      function previousTab(prev) {
        var currentTab = document.querySelector(".tab-content.active");
        var prevTab = document.getElementById(
          "tab" + (parseInt(currentTab.id.substr(3)) - prev)
        );
        currentTab.classList.remove("active");
        prevTab.classList.add("active");
      }

      // Function to handle form submission
      function enviarDatos(event) {
        event.preventDefault();

        const formData = new URLSearchParams(new FormData(event.target));

        fetch("/predict", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body: formData.toString(),
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.error) {
              document.getElementById("resultado").innerText =
                "Error: " + data.error;
            } else {
              document.getElementById("resultado").innerText =
                "Predicción: " + data.prediccion;
            }
          })
          .catch((error) => {
            document.getElementById("resultado").innerText =
              "Error en la solicitud.";
            console.error("Error:", error);
          });
      }
    </script>
  </body>
</html> {% endcomment %}
